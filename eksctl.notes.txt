$ docker run --rm -it -v ~/.aws:/root/.aws -v ~/.kube:/root/.kube amazon/aws-cli eks --region us-east-2 update-cluster-version --name dev --kubernetes-version 1.24 update: createdAt: '2021-07-19T11:15:20.980000+00:00' errors: [] id: 24938002-69b4-4fbf-a32f-0c1040233144 params: - type: Version value: '1.24' - type: PlatformVersion value: eks.5 status: InProgress type: VersionUpdate



eksctl upgrade cluster --name=demo-ekscluster
[ℹ]  eksctl version 0.127.0
[ℹ]  using region us-west-2
[ℹ]  (plan) would upgrade cluster "demo-ekscluster" control plane from current version "1.23" to "1.24"
[ℹ]  re-building cluster stack "eksctl-demo-ekscluster-cluster"
[✔]  all resources in cluster stack "eksctl-demo-ekscluster-cluster" are up-to-date
[ℹ]  checking security group configuration for all nodegroups
[ℹ]  all nodegroups have up-to-date configuration
[!]  no changes were applied, run again with '--approve' to apply the changes



eksctl upgrade cluster --name=demo-ekscluster --approve


eksctl utils update-kube-proxy --cluster=demo-ekscluster --approve



eksctl utils update-coredns --cluster=demo-ekscluster --approve


kubectl get daemonset kube-proxy --namespace kube-system -o=jsonpath='{$.spec.template.spec.containers[:1].image}'
kubectl describe deployment coredns --namespace kube-system | grep Image | cut -d "/" -f 3



kubectl scale deployments/cluster-autoscaler --replicas=0 -n kube-system



eksctl upgrade nodegroup --name=nodegroup --cluster=demo-ekscluster --kubernetes-version=1.24




docker build -t 426121349387.dkr.ecr.us-west-2.amazonaws.com/docker:latest .











